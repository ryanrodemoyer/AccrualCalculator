var App=Vue.component("demo-calculator-component",{template:"#demo-calculator-component",created:function(){this.getAccrual(this,function(){alert("Error retrieving the accrual. Try again.")})},provide:function(){return{getAccrual:this.getAccrual,updateAccrual:this.updateAccrual,deleteAccrual:this.deleteAccrual,addAccrualAction:this.addAccrualAction,deleteAccrualAction:this.deleteAccrualAction,copyAccrual:this.copyAccrual}},computed:{accrual:function(){return this.$store.state.accrual}},methods:{getAccrual:function(){return this.$store.state.accrual},copyAccrual:function(){var n=Object.assign({},this.accrual);return delete n.actions,delete n.rows,delete n.lastModified,delete n.accrualId,n},updateAccrual:function(n,t){var i=this;this.$store.commit("updateAccrual",n);t&&t()},deleteAccrual:function(){var n=this},addAccrualAction:function(n,t){var i=this;this.$store.commit("addAccrualAction",n);t&&t()},deleteAccrualAction:function(n){var t=this;this.$store.commit("deleteAccrualAction",n)}}}),store;Vue.component("accrual-table-component",{template:"#accrual-table-component",props:["accrual"],data:function(){return{}},methods:{}});Vue.component("accrual-row-component",{template:"#accrual-row-component",props:["row","accrualRate"],methods:{}});Vue.component("actions-component",{template:"#actions-component",props:["accrual"],inject:["updateAccrual","deleteAccrual","copyAccrual"],data:function(){return{localAccrual:{}}},created:function(){this.localAccrual=this.copyAccrual()},methods:{updateAccrualClick:function(n){var t=!1;n==="heart"?(t=!0,this.localAccrual.isHeart=!this.localAccrual.isHeart):n==="archive"&&(t=!0,this.localAccrual.isArchived=!this.localAccrual.isArchived);t&&this.updateAccrual(this.localAccrual)},deleteAccrualClick:function(){var n=confirm("THIS ACTION IS PERMANENT!\nYOUR DATA WILL BE GONE FOREVER.\nClick OK to delete the accrual forever.\nClick Cancel to you know ... not do anything.");n&&this.deleteAccrual(function(){alert("The accrual has been permanently removed from our system.")},function(){alert("Error deleting the accrual. Check the console for additional information.")})}}});Vue.component("cool-stats-component",{template:"#cool-stats-component",props:["accrual"],inject:["updateAccrual","copyAccrual"],data:function(){return{ui:{isView:!0,ready:!1},edit:{}}},methods:{doneClick:function(){var n=this;this.updateAccrual(this.edit,function(){n.edit=undefined;n.ui.isView=!0})},editClick:function(){this.edit=this.copyAccrual();this.ui.isView=!1},discardClick:function(){this.edit=undefined;this.ui.isView=!0}},computed:{isView:function(){return this.ui.isView}},created:function(){}});Vue.component("action-history-component",{template:"#action-history-component",props:["accrual"],methods:{}});Vue.component("action-history-detail-component",{template:"#action-history-detail-component",props:["action"],inject:["deleteAccrualAction"],methods:{deleteAccrualActionClick:function(){this.deleteAccrualAction(this.action.accrualActionId)}}});Vue.component("add-action-component",{template:"#add-action-component",props:["accrual"],inject:["addAccrualAction"],data:function(){return{ui:{show:!1},adjustment:{}}},computed:{isDisabled:function(){var n,t;return this.adjustment.accrualAction!=="ADJUSTMENT"?!0:(n=parseInt(this.adjustment.amount),!n||n<-40||n>40)?!0:(t=Date.parse(this.adjustment.actionDate),isNaN(t)===!0)?!0:new Date(this.adjustment.actionDate)<new Date(this.accrual.startingDate)?!0:this.adjustment.note&&this.adjustment.note.length>100?!0:!1}},methods:{showAdjustmentPopupClick:function(){var n=new Date,t=new Date(n.getFullYear(),n.getMonth(),n.getDate()),i=t.getTimezoneOffset(),r=new Date(t.getTime()+i*6e4),u=r.toISOString().split("T")[0];this.adjustment.accrualAction="ADJUSTMENT";this.adjustment.actionDate=u;this.ui.show=!this.ui.show},addAccrualActionClick:function(){var n=this;this.addAccrualAction(this.adjustment,function(){n.adjustment={};n.ui.show=!1})}}});store=new Vuex.Store({state:{accrual:{name:"Accrual Calculator Demo",accrualRate:7,hourlyRate:55,minHours:40,maxHours:255,ending:"PLUSONE",dayOfPayA:7,dayOfPayB:21,accrualFrequency:"SEMIMONTHLY",startingDate:"2018-10-07",lastModified:"2018-11-07T07:00:00.000Z",actions:[{accrualActionId:"9946e32a-00ac-4a3e-95d6-7a0999ee9118",accrualAction:"CREATED",actionDate:new Date(2018,10,31),amount:null,note:null,dateCreated:new Date(2018,10,7)},{accrualActionId:"91c66ded-bb04-47a4-97aa-1312d2b4c3ff",accrualAction:"ADJUSTMENT",actionDate:new Date(2018,10,7),amount:-8,note:"this is my day off",dateCreated:new Date(2018,10,7)}],rows:[{rowId:0,currentAccrual:22,accrualDate:null,hoursUsed:0,actions:[]},{rowId:1,currentAccrual:29,accrualDate:"2018-10-07",hoursUsed:0,actions:[]},{rowId:2,currentAccrual:36,accrualDate:"2018-10-21",hoursUsed:0,actions:[]},{rowId:3,currentAccrual:43,accrualDate:"2018-11-07",hoursUsed:0,actions:[{accrualActionId:"91c66ded-bb04-47a4-97aa-1312d2b4c3ff",accrualAction:"ADJUSTED",actionDate:"2018-10-31",amount:-8,note:"I sure love Halloween",dateCreated:new Date(2018,10,12)}]},{rowId:4,currentAccrual:50,accrualDate:"2018-11-21",hoursUsed:0,actions:[]},{rowId:5,currentAccrual:57,accrualDate:"2018-12-07",hoursUsed:0,actions:[]},{rowId:6,currentAccrual:64,accrualDate:"2018-12-21",hoursUsed:0,actions:[]},{rowId:7,currentAccrual:71,accrualDate:"2019-01-07",hoursUsed:0,actions:[]},{rowId:8,currentAccrual:78,accrualDate:"2019-01-21",hoursUsed:0,actions:[]},{rowId:9,currentAccrual:85,accrualDate:"2019-02-07",hoursUsed:0,actions:[]},{rowId:10,currentAccrual:92,accrualDate:"2019-02-21",hoursUsed:0,actions:[]},{rowId:11,currentAccrual:99,accrualDate:"2019-03-07",hoursUsed:0,actions:[]},{rowId:12,currentAccrual:106,accrualDate:"2019-03-21",hoursUsed:0,actions:[]},{rowId:13,currentAccrual:113,accrualDate:"2019-04-07",hoursUsed:0,actions:[]},{rowId:14,currentAccrual:120,accrualDate:"2019-04-21",hoursUsed:0,actions:[]},{rowId:15,currentAccrual:127,accrualDate:"2019-05-07",hoursUsed:0,actions:[]},{rowId:16,currentAccrual:134,accrualDate:"2019-05-21",hoursUsed:0,actions:[]},{rowId:17,currentAccrual:141,accrualDate:"2019-06-07",hoursUsed:0,actions:[]},{rowId:18,currentAccrual:148,accrualDate:"2019-06-21",hoursUsed:0,actions:[]},{rowId:19,currentAccrual:155,accrualDate:"2019-07-07",hoursUsed:0,actions:[]},{rowId:20,currentAccrual:162,accrualDate:"2019-07-21",hoursUsed:0,actions:[]},{rowId:21,currentAccrual:169,accrualDate:"2019-08-07",hoursUsed:0,actions:[]},{rowId:22,currentAccrual:176,accrualDate:"2019-08-21",hoursUsed:0,actions:[]},{rowId:23,currentAccrual:183,accrualDate:"2019-09-07",hoursUsed:0,actions:[]},{rowId:24,currentAccrual:190,accrualDate:"2019-09-21",hoursUsed:0,actions:[]},{rowId:25,currentAccrual:197,accrualDate:"2019-10-07",hoursUsed:0,actions:[]},{rowId:26,currentAccrual:204,accrualDate:"2019-10-21",hoursUsed:0,actions:[]},{rowId:27,currentAccrual:211,accrualDate:"2019-11-07",hoursUsed:0,actions:[]},{rowId:28,currentAccrual:218,accrualDate:"2019-11-21",hoursUsed:0,actions:[]},{rowId:29,currentAccrual:225,accrualDate:"2019-12-07",hoursUsed:0,actions:[]},{rowId:30,currentAccrual:232,accrualDate:"2019-12-21",hoursUsed:0,actions:[]}]}},mutations:{updateAccrual:function(n,t){Vue.set(n.accrual,"name",t.name);Vue.set(n.accrual,"minHours",t.minHours);Vue.set(n.accrual,"maxHours",t.maxHours);Vue.set(n.accrual,"startingDate",t.startingDate);Vue.set(n.accrual,"isHeart",t.isHeart);Vue.set(n.accrual,"isArchived",t.isArchived);Vue.set(n.accrual,"startingDate",t.startingDate);Vue.set(n.accrual,"ending",t.ending);Vue.set(n.accrual,"accrualFrequency",t.accrualFrequency);Vue.set(n.accrual,"hourlyRate",parseInt(t.hourlyRate));Vue.set(n.accrual,"dayOfPayA",parseInt(t.dayOfPayA));Vue.set(n.accrual,"dayOfPayB",parseInt(t.dayOfPayB));Vue.set(n.accrual,"lastModified",(new Date).toISOString())},addAccrualAction:function(n,t){function f(){function n(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}return n()+n()+"-"+n()+"-"+n()+"-"+n()+"-"+n()+n()+n()}var i,r,u;t.accrualActionId=f();t.dateCreated=(new Date).toISOString();i=n.accrual.actions.slice();i.push(t);r=n.accrual.rows?n.accrual.rows.slice():[];u=!1;r.forEach(function(n){var i=new Date(n.accrualDate),r=new Date(t.actionDate);!u&&r<=i&&(n.actions||(n.actions=[]),n.actions.push(t),u=!0)});Vue.set(n.accrual,"actions",i);Vue.set(n.accrual,"rows",r)},deleteAccrualAction:function(n,t){for(var o,r,u,e,f=n.accrual.actions.slice(),i=f.length-1;i>=0;i--)e=f[i],e.accrualActionId===t&&f.splice(i,1);for(o=n.accrual.rows.slice(),i=0;i<o.length;i++)for(r=o[i],u=r.actions?r.actions.length-1:0;u>=0;u--)if(e=r.actions[u],e.accrualActionId===t){r.actions.splice(u,1);break}Vue.set(n.accrual,"actions",f);Vue.set(n.accrual,"rows",o)}}});